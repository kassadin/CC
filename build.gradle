// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    
    repositories {
        google()
        jcenter()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.0.1'

        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.4'
        classpath 'com.github.dcendents:android-maven-gradle-plugin:1.4.1'
        classpath 'com.billy.android:autoregister:1.1.3'

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
        google()
        jcenter()
    }
}

ext {
    compileVersion = 26
    buildVersion = '26.0.2'
    minVersion = 8

    supportVersion = '25.3.1'

    m = [:] // true app | false lib
}

task clean(type: Delete) {
    delete rootProject.buildDir
}

readModuleConfig()

def readModuleConfig() {
    Properties localProperties = new Properties()
    try {
        def localFile = rootProject.file('local.properties')
        if (localFile != null && localFile.exists()) {
            localProperties.load(localFile.newDataInputStream())
        }
    } catch (Exception ignored) {
    }
    rootProject.subprojects.each {
        m[it.name] = Boolean.parseBoolean(localProperties.getProperty(it.name))
    }

    m.each{
        println "module ${it.key} is ${it.value ? "APP" : "LIB"}"
    }

    println "readModuleConfig finish"
}
